# Memory Structure and Stack vs Heap

### Structure

- 프로그램이 실행되기 위해 먼저 프로그램이 메모리에 로드 되어야 한다. 또한, 프로그램에서 사용되는 변수를 저장할 메모리도 필요하다.
- 따라서 운영체제는 프로그램의 실행을 위해 다양한 메모리 공간을 제공한다.

>1. 코드 영역 (낮은 주소) (내려갈수록 높아진다)
>2. 데이터 영역
>3. 스택 영역
>4. 힙 영역 (높은 주소)

### 코드 영역

- 실행할 프로그램의 코드가 저장되는 영역으로 텍스트 영역이라 부르기도 한다.
- CPU는 코드영역에서 저장된 명령어를 하나씩 가져가서 처리하게 된다.


### 데이터 영역

- 프로그램의 전역 변수와 정적 변수가 저장되는 영역이다.
- 프고르램의 시작과 함께 할당되며 종료시 소멸한다.

### 스택 영역

- 함수의 호출과 관계되는 지역 변수와 매개변수가 저장되는 영역이다.
- 함수의 호출과 함께 할당되며 호출이 완료되면 소멸한다.
- 스택 영역에 저장되는 함수의 호출 정보를 스택 프레임이라고 한다.
- 푸시, 팝으로 데이터를 저장, 인출한다. 따라서, 가장 늦게 저장된 데이터가 먼저 인출된다.
- 메모리의 높은 주소에서 낮은 주소의 방향으로 할당된다.
- 컴파일 타임에 크기가 결정된다.

### 힙 영역

- 사용자가 직접 관리할 수 있는 (해야하는) 영역이다.
- 사용자에 의해 메모리 공간이 동적으로 할당되고 해제된다.
- 힙 영역은 메모리의 낮은 주소에서 높은 주소의 방향으로 할당 된다.
- 런 타임에 크기가 결정된다.

### 스택 vs 힙

- 스택: 매우 빠른 액세스, 변수를 명시적으로 할당 해제 할 필요없다. / 힙: 느린 액세스, 변수가 전역적으로 액세스 할 수 있다
- 스택: 공간은 CPU에 의해 효율적 관리되고 메모리는 단편화되지 않는다. / 힙: 효율적으로 공간 사용을 못하면 메모리 블록이 시간이 지남에 따라 조각화되어 해제 될 수 있다.
- 스택: 지역 변수만 저장, 크기제한, 변수크기 조정불가 / 힙: 크기제한 없음, 메모리 관리해야한다.
> 한줄 답변: 스택은 정적 메모리 구조, 힙은 동적 메모리 구조를 가진다
